<div class="container-fluid">
    <div class="col-md-12">
        <div class="sk-wave" *ngIf="isLoading">
            <div class="sk-rect sk-rect1"></div>
            <div class="sk-rect sk-rect2"></div>
            <div class="sk-rect sk-rect3"></div>
            <div class="sk-rect sk-rect4"></div>
            <div class="sk-rect sk-rect5"></div>
        </div>
        <div *ngIf="!isLoading" class="card">
            <div class="card-block">
                <div class="row">
                    <div class="col-sm-2">
                        <select class="form-control" id="podcast" name="podcast" [(ngModel)]="selectedPodcastId"
                                (change)="onPodcastChange()">
                            <option *ngFor="let p of podcasts" value="{{p.id}}">{{p.title}}</option>
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group mr-2" role="group" aria-label="First group">
                                <a class="btn btn-outline-primary"
                                   [routerLink]="['/podcasts/'+ selectedPodcast.slug + '/edit/']"
                                   *ngIf="selectedPodcast">
                                    <i class="icon-plus"></i> &nbsp; Edit
                                </a>
                                <a class="btn btn-outline-danger" *ngIf="selectedPodcast"
                                   (click)="podcastDeleteDialog.show()">
                                    <i class="icon-plus"></i> &nbsp; Delete
                                </a>
                                <a class="btn btn-outline-success" [routerLink]="['/podcasts/add']">
                                    <i class="icon-plus"></i> &nbsp; Add
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-7" *ngIf="selectedPodcast">
                        <a *ngIf="podcasts != null && podcasts.length != 0" class="btn btn btn-outline-warning"
                           [href]="selectedPodcast.rssUrl" target="_blank">
                            <i class="fa fa-rss"></i> &nbsp; Rss Url
                        </a>
                        <a class="btn btn-outline-success"
                           href='http://cloud.feedly.com/#subscription/feed/{{selectedPodcast.rssUrl}}' target='blank'>
                            Add in Feedly
                        </a>
                        <a class="btn btn-outline-warning float-right" (click)="startUpload()">
                            <i class="fa fa-upload" aria-hidden="true"></i> Upload</a>
                        <button type="submit" class="btn btn-outline-success float-right" (click)="addEntry()">
                            <i class="fa fa-plus-circle"></i> Add
                        </button>
                        <fieldset class="form-group float-right">
                            <div class="input-group float-right" style="width:320px;">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i>
                                </span>
                                <input type="text" class="form-control span6 input-large float-right"
                                       placeholder="New entry URL" aria-describedby="basic-addon2"
                                       name="entry-url" [(ngModel)]="newEntrySourceUrl">
                            </div>
                        </fieldset>
                    </div>
                </div>
                <hr class="m-0">
                <br>
                <div class="row" *ngIf="uploadMode">
                    <app-podcast-upload-form [podcast]="selectedPodcast"
                                             (onUploadComplete)="onEntryUploadComplete($event)">
                    </app-podcast-upload-form>
                </div>
                <table class="table table-hover table-outline mb-0 hidden-sm-down">
                    <tbody>
                    <tr *ngFor="let entry of entries" app-entry-list-item (entryRemoved)='deleteEntry(entry)'
                        [entry]="entry"></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" bsModal #podcastDeleteDialog="bs-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Delete this podcast?</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="podcastDeleteDialog.hide()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <button type="button" class="btn btn-primary pull-right" (click)="podcastDeleteDialog.hide()">No
                </button>
                <button type="button" class="btn btn-danger pull-right"
                        (click)="deletePodcast(); podcastDeleteDialog.hide()">Yes
                </button>
            </div>
        </div>
    </div>
</div>
